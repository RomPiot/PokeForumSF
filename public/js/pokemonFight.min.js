document.addEventListener("DOMContentLoaded",(function(){let onHunt=!1,successCatch=!1;const body=document.querySelector("body"),userId=body.getAttribute("data-user-id");let userPokeball=body.getAttribute("data-user-pokeball");const pokemonMainContainer=document.querySelector(".pokemon-main-container"),cursorPokeball=document.querySelector("#cursor-pokeball"),huntBtn=document.querySelector("a.hunt-btn"),pokemon=document.querySelector("a.pokemon");let pokemonImage=document.querySelector("img.pokemon-image");const pokeballCatching=document.querySelector(".pokeball-catching"),pokeballCatch=document.querySelector(".pokeball-catch"),pokeballCatchBtn=document.querySelector(".pokeball-button");let pokemonData;function makeNewPosition(){var h=$(window).height()-50,w=$(window).width()-50,nh,nw;return[Math.floor(Math.random()*h),Math.floor(Math.random()*w)]}function movePokemon(myclass,difficulty){var newq=makeNewPosition();duration=1400-100*difficulty,$(myclass).animate({top:newq[0],left:newq[1]},duration,(function(){movePokemon(myclass,difficulty)}))}document.addEventListener("mousemove",(function(event){let x=event.clientX,y=event.clientY;cursorPokeball.style.left=x+"px",cursorPokeball.style.top=y+"px"})),huntBtn.addEventListener("click",(function(event){event.preventDefault(),body.style.cursor="none",cursorPokeball.classList.remove("display-none"),pokemonMainContainer.classList.remove("display-none");const url=this.href;onHunt=!0,$(".pokeball-loader").css({width:"60px",height:"60px"}),axios.post(url,{user_id:userId}).then((function(response){$(".pokeball-container").children().last().remove(),userPokeball-=1,pokemonData=JSON.parse(response.data.content);let idPokemon=pokemonData.idPokemon;pokemonImage.setAttribute("src","/images/pokemons/"+pokemonData.idPokemon+".png"),pokemon.setAttribute("data-id",pokemonData.idPokemon),0==userPokeball&&huntBtn.remove(),setTimeout(()=>{let pokemonHeight,pokemonWidth;$(".pokemon-main-container").fadeIn("0.5"),movePokemon(".pokemon",pokemonData.difficulty),pokemonImage.offsetHeight>pokemonImage.offsetWidth?(pokemonImage.style.height="90px",pokemonImage.style.width="auto"):(pokemonImage.style.width="90px",pokemonImage.style.height="auto")},20)}))})),document.addEventListener("click",(function(event){if(1==onHunt){if(successCatch=!1,event.target.classList.contains("hunt-btn")||(cursorPokeball.style.zIndex=1e3),event.target.classList.contains("pokemon-image")){event.preventDefault();const url=pokemon.getAttribute("href");axios.post(url,{user_id:userId,pokemon_id:pokemon.getAttribute("data-id")}).then((function(response){1==response.data&&(successCatch=!0)}))}event.target.classList.contains("hunt-btn")||($(".pokemon").stop(),$(".pokeball-loader").css({width:"0px",height:"0px"}),setTimeout(()=>{pokeballCatching.classList.remove("display-none"),$(".pokeball-catching").animate({opacity:1},400),pokeballCatch.classList.add("pokeball-animation"),1==successCatch&&setTimeout(()=>{pokeballCatchBtn.classList.add("pokeball-success")},1500),setTimeout(()=>{$(".pokemon-main-container").animate({opacity:"0"},700)},5e3),setTimeout(()=>{onHunt=!1,cursorPokeball.style.zIndex=998,pokemonMainContainer.classList.add("display-none"),pokeballCatchBtn.classList.remove("pokeball-success"),pokemonMainContainer.style.opacity=1,cursorPokeball.style.opacity=1,body.style.cursor="inherit",pokeballCatching.classList.add("display-none"),cursorPokeball.classList.add("display-none")},6e3)},1e3))}}))}));