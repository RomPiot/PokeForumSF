document.addEventListener("DOMContentLoaded",(function(){let onHunt=!1;const body=document.querySelector("body"),userId=body.getAttribute("data-user-id");let userPokeball=body.getAttribute("data-user-pokeball");const cursorPokeball=document.querySelector("#cursor-pokeball"),huntBtn=document.querySelector("a.hunt-btn"),pokemon=document.querySelector("a.pokemon");let pokemonImage=document.querySelector("img.pokemon-image"),pokemonData;function makeNewPosition(){var h=$(window).height()-50,w=$(window).width()-50,nh,nw;return[Math.floor(Math.random()*h),Math.floor(Math.random()*w)]}function movePokemon(myclass,difficulty){var newq=makeNewPosition();duration=1400-100*difficulty,$(myclass).animate({top:newq[0],left:newq[1]},duration,(function(){movePokemon(myclass,difficulty)}))}document.addEventListener("mousemove",(function(event){let x=event.clientX,y=event.clientY;cursorPokeball.style.left=x+"px",cursorPokeball.style.top=y+"px"})),huntBtn.addEventListener("click",(function(event){event.preventDefault(),body.style.cursor="none",cursorPokeball.classList.remove("display-none");const url=this.href;onHunt=!0,$(".pokeball-loader").css({width:"60px",height:"60px"}),axios.post(url,{user_id:userId}).then((function(response){$(".pokeball-container").children().last().remove(),userPokeball-=1,console.log(userPokeball),pokemonData=JSON.parse(response.data.content),console.log(pokemonData);let idPokemon=pokemonData.idPokemon;pokemonImage.setAttribute("src","/images/pokemons/"+pokemonData.idPokemon+".png"),pokemon.setAttribute("data-id",pokemonData.idPokemon),0==userPokeball&&huntBtn.remove(),setTimeout(()=>{let pokemonHeight,pokemonWidth;$(".pokemon-main-container").fadeIn("0.5"),movePokemon(".pokemon",pokemonData.difficulty),pokemonImage.offsetHeight>pokemonImage.offsetWidth?(pokemonImage.style.height="90px",pokemonImage.style.width="auto"):(pokemonImage.style.width="90px",pokemonImage.style.height="auto")},20)}))})),document.addEventListener("click",(function(event){if(1==onHunt){if(event.target.classList.contains("pokemon-image")){event.preventDefault();const url=pokemon.getAttribute("href");axios.post(url,{user_id:userId,pokemon_id:pokemon.getAttribute("data-id")}).then((function(response){console.log(response)}))}event.target.classList.contains("hunt-btn")||($(".pokemon").stop(),$(".pokeball-loader").css({width:"0px",height:"0px"}),setTimeout(()=>{onHunt=!1,$(".pokemon-main-container").fadeOut("0.5"),body.style.cursor="inherit",cursorPokeball.classList.add("display-none")},1e3))}}))}));