document.addEventListener("DOMContentLoaded",(function(){let successCatch=!1,escaping;const body=document.querySelector("body"),userId=body.getAttribute("data-user-id");let userPokeball=body.getAttribute("data-user-pokeball");const pokemonMainContainer=document.querySelector(".pokemon-main-container"),cursorPokeball=document.querySelector("#cursor-pokeball"),huntBtn=document.querySelector("a.hunt-btn"),buyPokeball=document.querySelector("a.buy-pokeball-btn"),pokemon=document.querySelector("a.pokemon");let pokemonImage=document.querySelector("img.pokemon-image");const pokeballCatching=document.querySelector(".pokeball-catching"),pokeballCatch=document.querySelector(".pokeball-catch");let pokemonData;function isCatch(isCatch=!1){$(".pokemon").stop(),$(".pokeball-loader").css({width:"0px",height:"0px"}),setTimeout(()=>{pokeballCatching.classList.remove("no-active"),isCatch?pokeballCatch.classList.add("pokeball-animation-success"):pokeballCatch.classList.add("pokeball-animation-fail")},1e3),setTimeout(()=>{pokeballCatching.classList.add("no-active"),$(".pokemon").animate({opacity:0},500)},7e3),setTimeout(()=>{cursorPokeball.classList.add("no-active"),pokemonMainContainer.classList.add("no-active"),body.style.cursor="inherit",pokemon.classList.add("no-active")},7500)}function escape(){$(".pokemon").stop(),pokeballCatching.classList.remove("no-active"),pokeballCatching.classList.add("no-active"),$(".pokemon").animate({opacity:0},500),cursorPokeball.classList.add("no-active"),pokemonMainContainer.classList.add("no-active"),body.style.cursor="inherit",pokemon.classList.add("no-active")}function makeNewPosition(){var h=$(window).height()-50,w=$(window).width()-50,nh,nw;return[Math.floor(Math.random()*h),Math.floor(Math.random()*w)]}function movePokemon(myclass,difficulty){var newq=makeNewPosition();duration=1400-100*difficulty,$(myclass).animate({top:newq[0],left:newq[1]},duration,(function(){movePokemon(myclass,difficulty)}))}document.addEventListener("mousemove",(function(event){let x=event.clientX,y=event.clientY;cursorPokeball.style.left=x+"px",cursorPokeball.style.top=y+"px"})),huntBtn&&huntBtn.addEventListener("click",(function(event){event.preventDefault(),body.style.cursor="none",cursorPokeball.classList.remove("no-active"),pokemonMainContainer.classList.remove("no-active"),pokeballCatch.classList.remove("pokeball-animation-success"),pokeballCatch.classList.remove("pokeball-animation-fail"),userPokeball-=1,$(".pokeball-container").children().first().addClass("no-active"),setTimeout(()=>{$(".pokeball-container").children().first().remove()},1e3),0==userPokeball&&(huntBtn.classList.add("no-active"),setTimeout(()=>{huntBtn.remove(),buyPokeball.classList.remove("display-none")},1e3));const url=this.href;$(".pokeball-loader").css({width:"60px",height:"60px"}),axios.post(url,{}).then((function(response){pokemonData=JSON.parse(response.data.content),pokemonImage.setAttribute("src","/images/pokemons/"+pokemonData.idPokemon+".png"),pokemon.setAttribute("data-id",pokemonData.idPokemon);let escapeTime=1e3*(15-pokemonData.difficulty);setTimeout(()=>{let pokemonHeight,pokemonWidth;movePokemon(".pokemon",pokemonData.difficulty),pokemonImage.offsetHeight>pokemonImage.offsetWidth?(pokemonImage.style.height="90px",pokemonImage.style.width="auto"):(pokemonImage.style.width="90px",pokemonImage.style.height="auto"),pokemon.classList.remove("no-active"),$(".pokemon").animate({opacity:1},500),escaping=setTimeout(()=>(escape(),!1),escapeTime)},20)})),clearTimeout(escaping)})),document.addEventListener("click",(function(event){if(!event.target.classList.contains("hunt-btn")){if(successCatch=!1,event.target.classList.contains("pokemon-image")){event.preventDefault();const url=pokemon.getAttribute("href");axios.post(url,{pokemon_id:pokemon.getAttribute("data-id")}).then((function(response){})),successCatch=!0}isCatch(successCatch)}}))}));